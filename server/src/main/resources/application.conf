server {
  host = "0.0.0.0"
  host = ${?MESHCHAT_HOST}
  
  port = 8080
  port = ${?MESHCHAT_PORT}
  
  maxConnections = 1000
  maxConnections = ${?MESHCHAT_MAX_CONNECTIONS}
  
  connectionTimeout = 30s
  heartbeatInterval = 30s
  bufferSize = 8192
  workerThreads = 8
}

database {
  driver = "org.h2.Driver"
  driver = ${?DB_DRIVER}
  
  url = "jdbc:h2:./data/meshchat;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE"
  url = ${?DB_URL}
  
  username = "sa"
  username = ${?DB_USERNAME}
  
  password = ""
  password = ${?DB_PASSWORD}
  
  maxPoolSize = 20
  connectionTimeout = 30s
  maxLifetime = 30m
}

security {
  rsaKeySize = 4096
  aesKeySize = 256
  sessionTimeout = 24h
  maxFailedAttempts = 5
  rateLimitPerMinute = 60
  
  enableTls = false
  enableTls = ${?MESHCHAT_ENABLE_TLS}
  
  # keystorePath = "/path/to/keystore.jks"
  # keystorePassword = "password"
}

monitoring {
  host = "0.0.0.0"
  host = ${?METRICS_HOST}
  
  port = 9090
  port = ${?METRICS_PORT}
  
  enableMetrics = true
  metricsPath = "/metrics"
  healthCheckPath = "/health"
  logLevel = "INFO"
  logLevel = ${?LOG_LEVEL}
}